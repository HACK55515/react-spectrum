import {Layout} from '../../src/Layout';
export default Layout;

import {DateRangePicker} from '@react-spectrum/s2';
import docs from 'docs:@react-spectrum/s2';

# DateRangePicker

<PageDescription>{docs.exports.DateRangePicker.description}</PageDescription>

<VisualExample
  component={DateRangePicker}
  docs={docs.exports.DateRangePicker}
  props={['size', 'labelPosition', 'labelAlign', 'necessityIndicator', 'isRequired', 'isDisabled', 'isReadOnly']}
  initialProps={{label: 'Trip dates'}}
  importSource="@react-spectrum/s2"
  type="s2" />

## Value

A DateRangePicker displays a placeholder by default. An initial, uncontrolled value can be provided using the `defaultValue` prop. Alternatively, a controlled value can be provided using the `value` prop.

Date ranges are objects with `start` and `end` properties containing date values, which are provided using objects from the [@internationalized/date](https://react-spectrum.adobe.com/internationalized/date/) package.

```tsx render
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {parseDate} from '@internationalized/date';
import {useState} from 'react';

function Example() {
  let [value, setValue] = useState({
    start: parseDate('2024-03-15'),
    end: parseDate('2024-03-22')
  });

  return (
    <>
      <DateRangePicker
        label="Trip dates"
        value={value}
        onChange={setValue} />
      <p>
        Selected range: {value.start.toString()} to {value.end.toString()}
      </p>
    </>
  );
}
```

## Range selection

DateRangePicker combines two DateFields for text input with a RangeCalendar in a popup for visual date range selection. Users can either type dates directly or use the calendar interface to select a range.

```tsx render
"use client";
import {DateRangePicker} from '@react-spectrum/s2';

<DateRangePicker label="Vacation dates" />
```

## Time zones

DateRangePicker is time zone aware when ZonedDateTime objects are provided as the value. In this case, the time zone abbreviation is displayed, and time zone concerns such as daylight saving time are taken into account.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {parseZonedDateTime} from '@internationalized/date';

<DateRangePicker
  label="Conference dates"
  defaultValue={{
    start: parseZonedDateTime('2024-11-07T00:45[America/Los_Angeles]'),
    end: parseZonedDateTime('2024-11-08T11:15[America/Los_Angeles]')
  }} />
```

## Granularity

The `granularity` prop allows you to control the smallest unit that is displayed by a DateRangePicker. By default, CalendarDate values are displayed with `"day"` granularity, and CalendarDateTime and ZonedDateTime values are displayed with `"minute"` granularity.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {parseAbsoluteToLocal} from '@internationalized/date';

<div style={{display: 'flex', gap: 20, flexDirection: 'column'}}>
  <DateRangePicker
    label="Date range"
    granularity="day" />
  <DateRangePicker
    label="Date and time range"
    granularity="minute"
    defaultValue={{
      start: parseAbsoluteToLocal('2024-04-07T18:45:22Z'),
      end: parseAbsoluteToLocal('2024-04-08T20:00:00Z')
    }} />
</div>
```

## Validation

DateRangePicker supports validation through the `isRequired` prop, minimum and maximum values, and custom validation functions. It can be integrated with forms and displays error states appropriately.

```tsx render hideImports
"use client";
import {DateRangePicker, Button, Form} from '@react-spectrum/s2';
import {today, getLocalTimeZone} from '@internationalized/date';

<Form>
  <DateRangePicker
    label="Trip dates"
    name="tripDates"
    isRequired
    minValue={today(getLocalTimeZone())}
    description="Select your travel dates." />
  <Button type="submit">Submit</Button>
</Form>
```

### Unavailable dates

DateRangePicker supports marking certain dates as unavailable. These dates cannot be selected and are displayed with a crossed out appearance in the calendar. By default, users may not select non-contiguous ranges that contain unavailable dates within them.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {today, getLocalTimeZone} from '@internationalized/date';

function Example() {
  let now = today(getLocalTimeZone());
  
  let disabledRanges = [
    [now, now.add({days: 5})],
    [now.add({days: 14}), now.add({days: 16})],
    [now.add({days: 23}), now.add({days: 24})],
  ];

  let isDateUnavailable = (date) => {
    return disabledRanges.some((interval) => 
      date.compare(interval[0]) >= 0 && 
      date.compare(interval[1]) <= 0
    );
  };

  return (
    <DateRangePicker
      label="Hotel booking"
      minValue={today(getLocalTimeZone())}
      isDateUnavailable={isDateUnavailable} />
  );
}
```

## Multiple months

The calendar popup can display multiple months using the `maxVisibleMonths` prop, if screen space permits.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';

<DateRangePicker
  label="Trip dates"
  maxVisibleMonths={2} />
```

## Label positioning

The label can be positioned using the `labelPosition` prop.

```tsx render hideImports docs={docs.exports.DateRangePicker} links={docs.links} props={['labelPosition', 'labelAlign']}
"use client";
import {DateRangePicker} from '@react-spectrum/s2';

function Example(props) {
  return (
    <DateRangePicker
      {...props}/* PROPS */
      label="Trip dates" />
  );
}
```

## Events

DateRangePicker accepts an `onChange` prop which is triggered whenever the start or end date is edited by the user.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {parseDate, getLocalTimeZone} from '@internationalized/date';
import {useDateFormatter} from '@react-aria/i18n';
import {useState} from 'react';

function Example() {
  let [range, setRange] = useState({
    start: parseDate('2024-07-03'),
    end: parseDate('2024-07-10')
  });
  let formatter = useDateFormatter({dateStyle: 'long'});

  return (
    <>
      <DateRangePicker
        label="Trip dates"
        value={range}
        onChange={setRange} />
      <p>
        Selected range: {range ? 
          formatter.formatRange(
            range.start.toDate(getLocalTimeZone()), 
            range.end.toDate(getLocalTimeZone())
          ) : '--'}
      </p>
    </>
  );
}
```

## International calendars

DateRangePicker supports selecting dates in many calendar systems used around the world, including Gregorian, Hebrew, Indian, Islamic, Buddhist, and more. Dates are automatically displayed in the appropriate calendar system for the user's locale.

```tsx render hideImports
"use client";
import {DateRangePicker} from '@react-spectrum/s2';
import {useState} from 'react';

function Example() {
  let [range, setRange] = useState(null);
  
  return (
    <div style={{fontFamily: 'system-ui'}}>
      <DateRangePicker
        label="محدوده تاریخ"
        value={range}
        onChange={setRange} />
      <p>Start date: {range?.start.toString()}</p>
      <p>End date: {range?.end.toString()}</p>
    </div>
  );
}
```

## Props

<PropTable component={docs.exports.DateRangePicker} links={docs.links} />
